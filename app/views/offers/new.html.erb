<div class="text-center homepage-header p-4 bg-dark">
  <div class="text-white">
    <div class="mb-2 lead">
      Adding a new <span class="bg-white text-danger font-weight-bold p-1">offerâ†µ</span>
    </div>

    <div class="small font-weight-light">
      First, fill in the details about the position.
    </div>
  </div>
</div>

<div class="bg-light p-4">
  <div class="container center-box-max-width bg-white border rounded p-4">

    <div class="progress mb-4">
      <div class="progress-bar bg-danger" role="progressbar" style="width: 33%" aria-valuenow="33" aria-valuemin="0" aria-valuemax="100"></div>
    </div>

    <div>
      <%= form_for(@offer, url: offers_path) do |f| %>
        <div class="row">
          <div class="col">
            <div class="form-group">

              <%= label_tag "offer[company_name]" do %>
                Company name <span class="text-danger">*</span>
              <% end %>
              <%= text_field_tag "offer[company_name]", @offer.company&.name, class: "form-control", placeholder: "Google", required: "true", autocomplete: "off" %>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <%= f.label :location do %>
                Location <span class="text-danger">*</span>
              <% end %>
              <%= f.text_field :location, class: "form-control", placeholder: "San Francisco", required: "true", autocomplete: "off" %>
            </div>
          </div>

          <div class="col-md-6">
            <div class="form-group">
              <%= f.label :position do %>
                Position <span class="text-danger">*</span>
              <% end %>
              <%= f.text_field :position, class: "form-control", placeholder: "Software Engineer", required: "true", autocomplete: "off" %>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <%= f.label :level, value: "Position level" %>
              <%= f.text_field :level, class: "form-control", placeholder: "L5" %>
            </div>
          </div>

          <div class="col-md-6">
            <div class="form-group">
              <%= f.label :yoe, value: "Years of Experience (yoe)" %>
              <%= f.number_field :yoe, class: "form-control", placeholder: "4" %>
            </div>
          </div>
        </div>

        <button type="submit" class="btn btn-block btn-danger">Next ></button>
      <% end %>
    </div>
  </div>
</div>

<script type="text/javascript">
  $('#offer_company_name').autocomplete({
    minChars: 2,
    source: function(req, res){
      $.getJSON('https://autocomplete.clearbit.com/v1/companies/suggest', { query: req.term }, function(data){ res(data); });
    },
    focus: function(event, ui){
      $('#offer_company_name').val(ui.item.name);
      return false;
    },
    select: function(event, ui){
      $('#offer_company_name').val(ui.item.name);
      return false;
    },
    messages: {
      noResults: '',
      results: function() {}
    }
  }).autocomplete('instance')._renderItem = function(ul, item) {
    ul.addClass('list-group')

    return $('<li class="d-flex list-group-item list-group-item-action">')
      .append('<div class="mr-auto"><img src="' + item.logo + '?size=20" class="mr-2" />'+item.name+'</div><div class="ml-auto small text-muted">' + item.domain + '</div>')
      .appendTo(ul);
  };
</script>
